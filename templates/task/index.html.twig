{% extends 'layout.html.twig' %}

{% block title %}Tasks
{% endblock %}

{% block body %}
	<div>
		<h4 style="display:inline">
			My Tasks
		</h4>
	</div>

	<div class="row mt-3">
		<div class="col-md-6">
			<h5>To Do</h5>
			{% for item in tasks %}
				{% if item.status == "DOING" %}
					<div class="card">
						<div class="card-body">
							<h5 class="card-title">{{item.name}}</h5>
							<p class="card-text">
								<strong>Description:
								</strong>
								<br>{{item.description}}</p>
							<h6 class="card-subtitle mb-2 text-muted">
								<strong>Department :</strong>
								{{item.getDepartement().name}}</h6>
							<h6>
								<h6 class="card-subtitle mb-2 text-muted">
									<strong>Status :</strong>
									{{item.status}}</h6>
								<h6>
									<a href="#" class="card-link text-success" data-bs-toggle="modal" data-bs-target="#p{{item.id}}">Modify</a>
								</div>
								<div class="modal fade" id="p{{item.id}}" tabindex="-1" aria-hidden="true" style="display: none;">
									<div class="modal-dialog">
										<div class="modal-content">
											<div class="modal-header">
												<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
											</div>
											<div class="modal-body">
												<div class="card">
													<div class="card-body">
														<h5 class="card-title">Modify Task</h5>

														<!-- Floating Labels Form -->
														<form method="get" action="/updatetask/{{item.id}}" class="row g-3">
															<div class="form-floating mb-3">
																<select required value="{{item.status}}" name="state" class="form-select" id="floatingSelect" aria-label="Floating label select example">


																	<option {% if item.status =="DOING" %} selected {% endif %} value="DOING">DOING</option>
																	<option {% if item.status =="DONE" %} selected {% endif %} value="DONE">DONE</option>

																</select>
																<label for="floatingSelect">State</label>
															</div>
															<div class="text-center">
																<button type="submit" class="btn btn-primary">Submit</button>
															</div>
														</form>
														<!-- End floating Labels Form -->

													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						{% endif %}
					{% endfor %}

				</div>
				<div class="col-md-6">
					<h5>DONE</h5>
					{% for item in tasks %}
						{% if item.status == "DONE" %}
							<div class="card">
								<div class="card-body">
									<h5 class="card-title">{{item.name}}</h5>
									<p class="card-text">
										<strong>Description:
										</strong>
										<br>{{item.description}}</p>
									<h6 class="card-subtitle mb-2 text-muted">
										<strong>Department :</strong>
										{{item.getDepartement().name}}</h6>
									<h6>
										<h6 class="card-subtitle mb-2 text-muted">
											<strong>Status :</strong>
											{{item.status}}</h6>
										<h6>
											<a href="#" class="card-link text-success" data-bs-toggle="modal" data-bs-target="#p{{item.id}}">Modify</a>
										</div>
										<div class="modal fade" id="p{{item.id}}" tabindex="-1" aria-hidden="true" style="display: none;">
											<div class="modal-dialog">
												<div class="modal-content">
													<div class="modal-header">
														<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
													</div>
													<div class="modal-body">
														<div class="card">
															<div class="card-body">
																<h5 class="card-title">Modify Task</h5>

																<!-- Floating Labels Form -->
																<form method="get" action="/updatetask/{{item.id}}" class="row g-3">
																	<div class="form-floating mb-3">
																		<select required value="{{item.status}}" name="state" class="form-select" id="floatingSelect" aria-label="Floating label select example">


																			<option {% if item.status =="DOING" %} selected {% endif %} value="DOING">DOING</option>
																			<option {% if item.status =="DONE" %} selected {% endif %} value="DONE">DONE</option>

																		</select>
																		<label for="floatingSelect">State</label>
																	</div>
																	<div class="text-center">
																		<button type="submit" class="btn btn-primary">Submit</button>
																	</div>
																</form>
																<!-- End floating Labels Form -->

															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								{% endif %}
							{% endfor %}
						</div>
					</div>
				{% endblock %}
